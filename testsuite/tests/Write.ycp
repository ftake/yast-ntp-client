/**
 * File:
 *  Read.ycp
 *
 * Module:
 *  NTP client configurator
 *
 * Summary:
 *  Reading configuration testsuite
 *
 * Authors:
 *  Jiri Srain <jsrain@suse.cz>
 *
 * $Id$
 *
 */

{
    include "testsuite.ycp";
    import "Progress";
    import "NtpClient";
    import "Mode";

    Mode::test = true;

    Progress::off ();

    map READ = $[
	"init" : $[
	    "scripts" : $[
		"exists" : true,
	    ],
	],
	"etc" : $[
	    "ntp_conf" : $[
		"all" : $[
		    "comment":"",
		    "file":-1,
		    "kind":"section",
		    "name":"",
		    "type":-1,
		    "value":[],
		],
	    ],
	],
    ];

    TEST (``(NtpClient::Import ($[
	"peers":[
	    $["address":"ntp1", "initial_sync":true, "options":" options1", "type":"server"],
	    $["address":"127.127.1.2", "initial_sync":false, "options":" options_clock", "type":"__clock"],
	    $["address":"ntp2", "initial_sync":true, "options":" options2", "type":"server"],
	    $["address":"peer1", "initial_sync":false, "options":" options_peer", "type":"peer"]
	],
	"start_at_boot":false,
	"start_in_chroot":true,])), [READ, $[], $[]], nil);

    TEST (``(NtpClient::Write ()), [READ, $[], $[]], nil);
}
